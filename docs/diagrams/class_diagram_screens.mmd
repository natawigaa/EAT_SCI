%% Class diagram â€” Screens (lib/screen)
%% Generated: 2025-11-07
%% Purpose: Per-folder diagram for screens under lib/screen

classDiagram

    class HomeScreen {
        + TextEditingController _searchController
        + List<Map<String,dynamic>> restaurants
        + Future<void> loadRestaurants()
        + void openRestaurant(String restaurantId)
    }

    class DetailRestuarantScreen {
        + String restaurantId
        + String restaurantName
        + List<Map<String,dynamic>> menuItems
        + Future<void> loadMenus()
        + void addToCart(Map menuItem)
    }

    class FoodOrderScreen {
        + CartService cart
        + List<Map<String,dynamic>> cartItems
        + double totalAmount
        + void checkout()
    }

    class PaymentScreen {
        + double totalAmount
        + int itemCount
        + Future<void> confirmPayment()
    }

    class ProfileScreen {
        + Future<void> loadProfile()
        + Future<void> updateProfile()
    }

    class HistoryScreen {
        + String studentId
        + List<Map<String,dynamic>> _completedOrders
        + Future<void> loadHistory()
    }

    class OrderTrackingScreen {
        + int orderId
        + void subscribeToOrderRealtime()
    }

    %% Auth Screens
    class LoginScreen {
        + void _handleLogin()
        + void _handleForgotPassword()
    }

    class SignUpScreen {
        + Future<void> _signUp()
    }

    class CompleteProfileScreen {
        + Future<void> submitAdditionalInfo(Map data)
    }

    %% Service usage
    HomeScreen ..> SupabaseService : "getRestaurants"
    DetailRestuarantScreen ..> SupabaseService : "getMenuItems"
    FoodOrderScreen ..> CartService : "cart operations"
    PaymentScreen ..> SupabaseService : "createOrder + payment flow"
    ProfileScreen ..> SupabaseService : "getStudentProfile/updateProfile"
    HistoryScreen ..> SupabaseService : "getStudentOrders/getCompletedAndCancelledOrders"
    OrderTrackingScreen ..> SupabaseService : "setupOrderRealtimeSubscription"
    LoginScreen ..> SupabaseService : "auth"
    SignUpScreen ..> SupabaseService : "auth + create student"

    %% Navigation (high level)
    HomeScreen --> DetailRestuarantScreen : "open restaurant"
    DetailRestuarantScreen --> FoodOrderScreen : "add to cart -> open cart"
    FoodOrderScreen --> PaymentScreen : "checkout -> payment"
    HomeScreen --> ProfileScreen : "profile action"
    HomeScreen --> HistoryScreen : "open history"
    HomeScreen --> OrderTrackingScreen : "track order"
