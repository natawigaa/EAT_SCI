%% Class diagram â€” Part 2: UI Screens & Navigation
%% Generated: 2025-11-07
%% Purpose: show main screens, navigation flows and relationships to services

classDiagram

    class LoginScreen {
        + TextEditingController emailController
        + TextEditingController passwordController
        + Future<void> _handleLogin()
    }

    class SignUpScreen {
        + TextEditingController emailController
        + TextEditingController passwordController
        + Future<void> _signUp()
    }

    class HomeScreen {
        + TextEditingController _searchController
        + List<Map<String,dynamic>> restaurants
        + Future<void> loadRestaurants()
        + void openRestaurant(String restaurantId)
    }

    class DetailRestuarantScreen {
        + String restaurantId
        + String restaurantName
        + List<Map<String,dynamic>> menuItems
        + Future<void> loadMenus()
        + void addToCart(Map menuItem)
    }

    class OrderStatusScreen {
        + int orderId
        + List<Map<String,dynamic>> orders
        + Future<void> refreshStatus()
    }

    class HistoryScreen {
        + String studentId
        + List<Map<String,dynamic>> _completedOrders
        + Future<void> loadHistory()
    }

    class EditProfileScreen {
        + TextEditingController _usernameController
        + TextEditingController _phoneController
        + String? _profileImageUrl
        + Future<void> loadProfile()
        + Future<void> updateProfile(Map data)
    }

    class OrderTrackingScreen {
        + int orderId
        + void subscribeToOrderRealtime()
        + void stopTracking()
    }

    class CompleteProfileScreen {
        + Future<void> submitAdditionalInfo(Map data)
        + void navigateToHome()
    }

    class FoodOrderScreen {
        + CartService cart
        + List<Map<String,dynamic>> cartItems
        + double totalAmount
        + void checkout()
    }

    class PaymentScreen {
        + double totalAmount
        + int itemCount
        + Future<void> confirmPayment()
    }

    class ProfileScreen {
        + Future<void> loadProfile()
        + Future<void> updateProfile()
    }

    class RestaurantDashboard {
        + String restaurantId
        + String restaurantName
        + void openOrdersTab()
    }

    %% Navigation relations
    LoginScreen --> SignUpScreen : "navigate to"
    LoginScreen --> HomeScreen : "on success"
    SignUpScreen --> HomeScreen : "on success"
    HomeScreen --> DetailRestuarantScreen : "open restaurant"
    DetailRestaurantScreen --> FoodOrderScreen : "add to cart -> open cart"
    FoodOrderScreen --> PaymentScreen : "checkout -> payment"
    HomeScreen --> ProfileScreen : "profile action"

    HomeScreen --> HistoryScreen : "open history"
    HomeScreen --> OrderTrackingScreen : "track order"
    HomeScreen --> OrderStatusScreen : "quick status"
    ProfileScreen --> EditProfileScreen : "edit profile"
    SignUpScreen --> CompleteProfileScreen : "complete profile"
    PaymentScreen --> OrderTrackingScreen : "view tracking"

    %% Service usage
    LoginScreen ..> SupabaseService : "auth"
    SignUpScreen ..> SupabaseService : "auth + create student"
    HomeScreen ..> SupabaseService : "getRestaurants"
    DetailRestuarantScreen ..> SupabaseService : "getMenuItems"
    FoodOrderScreen ..> CartService : "read/modify cart"
    PaymentScreen ..> SupabaseService : "createOrder + payment flow"
    OrderStatusScreen ..> SupabaseService : "getOrder/getOrderRealtime/cancelOrder"
    HistoryScreen ..> SupabaseService : "getStudentOrders/getCompletedAndCancelledOrders"
    EditProfileScreen ..> SupabaseService : "getStudentProfile/updateStudentProfile/uploadProfileImage"
    OrderTrackingScreen ..> SupabaseService : "setupOrderRealtimeSubscription"
    CompleteProfileScreen ..> SupabaseService : "updateStudentProfile"
